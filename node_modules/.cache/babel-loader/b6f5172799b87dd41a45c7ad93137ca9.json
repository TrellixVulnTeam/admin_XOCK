{"ast":null,"code":"var _jsxFileName = \"/Users/we/dev/cp-dev/src/page/main/MainContainer.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useCallback, useRef } from 'react';\nimport axios from 'axios';\nimport PAGECONST from './utils/Constants';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction MainContainer({}) {\n  _s();\n\n  const [pageState, setPageState] = useState({});\n  const [isLoading, setIsLoading] = useState({});\n  const [list, setList] = useState([]);\n  const [payload, setPayload] = useState({\n    params: {\n      page: 1,\n      pageCount: PAGECONST.count,\n      totalCount: 0\n    }\n  });\n  const rootRef = useRef();\n  const targetRef = useRef();\n\n  const getData = body => {\n    let key = '80CFeBE4MD6JmhEfClBx7zqo1eGvwTl5EZgKyMQc';\n    axios.get(\"http://52.78.173.151/boards\", {\n      \"x-api-key\": key\n    }, body).then(response => {\n      if (response) {\n        const {\n          result,\n          data\n        } = response.data;\n\n        if (result.code === 1) {\n          console.log('data', response);\n          const paging = response.data.paging || payload.params;\n          const data = response.data.data || list;\n          setList(data || []);\n          setPayload({\n            params: {\n              page: data.paging.page,\n              pageCount: data.paging.count,\n              totalCount: data.paging.totalCount\n            }\n          });\n          setPageState(pageState => ({ ...pageState,\n            data,\n            paging\n          }));\n          console.log('paging', paging);\n          console.log('data', data);\n        }\n      }\n    }).catch(err => alert(\"글을 가져오는데 실패 했습니다.\"));\n  };\n\n  useEffect(() => {\n    getData();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: rootRef,\n    children: [list.map((el, i) => {\n      /*#__PURE__*/\n      _jsxDEV(\"div\", {\n        ref: i == list.length - 1 && !payload.params.totalCount ? targetRef : null\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 13\n      }, this);\n    }), isLoading && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 25\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 9\n  }, this);\n}\n\n_s(MainContainer, \"Xw0jLkjjJa4ygTcysa3V8D++HfE=\");\n\n_c = MainContainer;\nexport default MainContainer;\n\nvar _c;\n\n$RefreshReg$(_c, \"MainContainer\");","map":{"version":3,"sources":["/Users/we/dev/cp-dev/src/page/main/MainContainer.js"],"names":["React","useState","useEffect","useCallback","useRef","axios","PAGECONST","MainContainer","pageState","setPageState","isLoading","setIsLoading","list","setList","payload","setPayload","params","page","pageCount","count","totalCount","rootRef","targetRef","getData","body","key","get","then","response","result","data","code","console","log","paging","catch","err","alert","map","el","i","length"],"mappings":"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","sourcesContent":["import React, {useState, useEffect, useCallback, useRef} from 'react'\nimport axios from 'axios'\nimport PAGECONST from './utils/Constants';\n\nfunction MainContainer({}) { \n    const [pageState, setPageState] = useState({})\n    const [isLoading, setIsLoading] = useState({})\n    const [list, setList] = useState([])\n    const [payload, setPayload] = useState({\n        params: {\n            page: 1,\n            pageCount: PAGECONST.count,\n            totalCount: 0\n        }\n    })\n    const rootRef = useRef();\n    const targetRef = useRef();\n\n    const getData = (body) => {\n      let key = '80CFeBE4MD6JmhEfClBx7zqo1eGvwTl5EZgKyMQc'\n      axios.get(\"http://52.78.173.151/boards\", {\n        \"x-api-key\": key,\n        }, body)\n        .then( response => {\n         if(response){\n           const { result, data } = response.data\n           if(result.code === 1){\n                console.log('data',response)\n                const paging = response.data.paging || payload.params;\n                const data = response.data.data || list;\n                setList(data || [])\n                setPayload({\n                    params:{\n                        page:  data.paging.page,\n                        pageCount: data.paging.count,\n                        totalCount: data.paging.totalCount\n                    }\n                })\n                setPageState(pageState => ({...pageState, data, paging}))\n                console.log('paging',paging)\n                console.log('data',data)\n           }\n         }\n        })\n        .catch(err => alert(\"글을 가져오는데 실패 했습니다.\"))\n    }\n    useEffect(() => {\n      getData()\n    },[])\n    return (\n        <div ref={rootRef}>\n          {list.map((el, i) => {\n            <div ref={i == list.length - 1 && !payload.params.totalCount ? targetRef : null}/>\n            })\n          }\n          {isLoading && <p>Loading...</p>}\n        </div>\n    );\n  }\n\nexport default MainContainer;\n\n\n"]},"metadata":{},"sourceType":"module"}